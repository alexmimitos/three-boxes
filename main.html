<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<style>
  * {
    margin: 0;
    padding: 0;
    border: none;
    box-sizing: border-box;
  }
</style>

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@v0.177.0/build/three.module.js",
    "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.177.0/examples/jsm/"
  }
}
</script>


<script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import {getPhongBox} from "./modules.js"

    //1. Create scene
    const scene = new THREE.Scene();

    //2. Create camera
    const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
    camera.position.z = 25;

    //3. Create renderer
    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild( renderer.domElement);
    renderer.setAnimationLoop(animate);

    // add lights

    const directLight = new THREE.DirectionalLight(0xffffff, 2);
    directLight.position.set(-10, 10, 10);
    directLight.target.position.set(0, 0, 0);
    scene.add(directLight);
    scene.add(directLight.target);

    const redLight = new THREE.DirectionalLight(0xff0000, 2);
    redLight.position.set(10, 0, 0);
    scene.add(redLight);

    const greenLight = new THREE.DirectionalLight(0x00ff00, 2);
    greenLight.position.set(0, -10, 0);
    scene.add(greenLight);

    const blueLight = new THREE.DirectionalLight(0x0000ff, 2);
    blueLight.position.set(0, 0, -10);
    scene.add(blueLight);

    

    //4. resize
    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    //5 helpers
    const controls = new OrbitControls( camera, renderer.domElement );
    scene.add(new THREE.AxesHelper(12));
    scene.add(new THREE.GridHelper(5, 10));

    //6. create group
    // todo

    const group = new THREE.Group();
    
    //7. create objects with getPhongBox() size = 0.1, color = white . add then to group

    const boxCount = 10000;
    for(let i = 0; i < boxCount; i++) {
      const box = getPhongBox({ w:0.1, h: 0.1, color: 0xffffff, wireframe:false});
      box.position.set(
        Math.random() * 20 -10,
        Math.random() * 20 -10,
        Math.random() * 20 -10
      );
      group.add(box);
    }

    

    //8. add group to scene
  
    scene.add(group);


    // loop
    function animate() {
        //todo: set rotation x, y, z
        group.rotation.x += 0.001;
        group.rotation.y += 0.002;
        group.rotation.z += 0.0015;

        renderer.render(scene, camera);
  }


    
</script>

</head>
<body>
    
</body>
</html>
